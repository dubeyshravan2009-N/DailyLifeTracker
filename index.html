<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ“– My Daily Diary</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Dancing+Script&display=swap" rel="stylesheet">
<style>
body {
  margin:0; padding:20px;
  font-family:'Playfair Display', serif;
  background:#eae7dc;
  color:#222;
  min-height:100vh;
  display:flex; flex-direction:column; align-items:center;
}

/* HEADING */
h1 {
  font-family: 'Dancing Script', cursive;
  font-size: 3rem;
  margin-bottom: 10px;
  color:#111;
  border-bottom: 2px solid #444;
  padding-bottom: 10px;
  text-align:center;
}

#greeting {
  font-size:1.2rem;
  margin-bottom:20px;
  font-family:'Roboto', sans-serif;
  color:#444;
  text-align:center;
}

/* DIARY BOOK */
#book {
  position:relative;
  width:90%; max-width:800px;
  height:500px;
  perspective:2000px;
  margin-top:20px;
}

.page {
  width:100%; height:100%;
  background:#fff;
  border:1px solid #ccc;
  box-shadow:0 5px 20px rgba(0,0,0,0.2);
  position:absolute;
  top:0; left:0;
  transform-origin:left center;
  transform-style:preserve-3d;
  transition:transform 1s ease;
  border-radius:6px;
  overflow:hidden;
  padding:30px;
}

.page h2 {
  font-family:'Dancing Script', cursive;
  font-size:1.8rem;
  margin-bottom:10px;
}

.page p {
  font-family:'Roboto', sans-serif;
  font-size:16px;
  line-height:1.6;
}

/* FLIP STATES */
.page.flipped {
  transform:rotateY(-180deg);
}

/* NAVIGATION */
#controls {
  margin-top:20px;
  display:flex; gap:20px;
}
#controls button {
  padding:10px 20px;
  border:none;
  background:#111; color:#fff;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
#controls button:hover {
  background:#444;
}

/* FORM */
#updateForm {
  margin-top:30px;
  background:#fff;
  border:1px solid #ddd;
  border-radius:12px;
  padding:20px;
  width:100%; max-width:600px;
  display:flex; flex-direction:column; gap:15px;
  box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

#updateForm textarea {
  border:1px solid #ccc;
  border-radius:8px;
  padding:12px;
  font-size:16px;
  outline:none;
  background:#fafafa;
  font-family:'Roboto', sans-serif;
}

#updateForm button {
  padding:12px;
  border:none;
  border-radius:8px;
  background:#111; color:#fff;
  font-weight:bold;
  cursor:pointer;
}
#updateForm button:hover { background:#444; }
</style>
</head>
<body>

<h1>ðŸ“– My Daily Diary</h1>
<div id="greeting"></div>

<div id="book"></div>

<div id="controls">
  <button id="prevBtn">â¬… Prev</button>
  <button id="nextBtn">Next âž¡</button>
</div>

<div id="updateForm">
  <textarea id="textInput" placeholder="Write your diary entry..."></textarea>
  <button id="addBtn">Add Entry</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  let updates = JSON.parse(localStorage.getItem('updates')) || [];
  let currentPage = 0;

  const book = document.getElementById('book');
  const greetingDiv = document.getElementById('greeting');
  const userName = "Shravan"; // <-- changeable name if needed

  // Greeting Message
  function updateGreeting(){
    const hour = new Date().getHours();
    let greeting = "Hello";
    if(hour < 12) greeting = "Good Morning";
    else if(hour < 18) greeting = "Good Afternoon";
    else greeting = "Good Evening";

    greetingDiv.innerHTML = `${greeting}, <strong>${userName}</strong> ðŸŒ¸<br>Welcome back to your diary â€” letâ€™s capture your thoughts today.`;
  }

  // Render Pages
  function renderPages() {
    book.innerHTML = '';
    // Add intro page
    const intro = document.createElement('div');
    intro.className = 'page';
    if(0 < currentPage) intro.classList.add('flipped');
    intro.innerHTML = `<h2>Dear ${userName},</h2>
      <p>This diary is your private space. Each page holds your stories, moods, and moments.<br><br>
      Take a breath, relax, and let your words flow...</p>`;
    book.appendChild(intro);

    updates.forEach((u,i)=>{
      const page = document.createElement('div');
      page.className = 'page';
      if(i+1 < currentPage) page.classList.add('flipped');
      page.innerHTML = `<h2>${u.date}</h2><p>${u.text}</p>`;
      book.appendChild(page);
    });
  }

  // Add Entry
  document.getElementById('addBtn').addEventListener('click', ()=>{
    const text = document.getElementById('textInput').value;
    if(!text) { alert('Please write something first'); return; }
    const now = new Date();
    const date = now.toLocaleDateString();
    const time = now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
    updates.push({date: `${date} â€” ${time}`, text});
    localStorage.setItem('updates', JSON.stringify(updates));
    document.getElementById('textInput').value='';
    currentPage = updates.length; // jump to last page
    renderPages();
  });

  // Navigation
  document.getElementById('nextBtn').addEventListener('click', ()=>{
    if(currentPage < updates.length) {
      currentPage++;
      renderPages();
    }
  });
  document.getElementById('prevBtn').addEventListener('click', ()=>{
    if(currentPage > 0) {
      currentPage--;
      renderPages();
    }
  });

  updateGreeting();
  renderPages();
});
</script>
</body>
</html>
