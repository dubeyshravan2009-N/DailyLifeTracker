<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ“– My Daily Diary</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Dancing+Script&display=swap" rel="stylesheet">
<style>
body {
  margin:0; padding:20px;
  font-family:'Playfair Display', serif;
  background: linear-gradient(135deg, #f3f2ed, #eae7dc);
  color:#222;
  min-height:100vh;
  display:flex; flex-direction:column; align-items:center;
}

/* HEADING */
h1 {
  font-family: 'Dancing Script', cursive;
  font-size: 3rem;
  margin-bottom: 5px;
  color:#2c2c2c;
  border-bottom: 2px solid #444;
  padding-bottom: 8px;
  text-align:center;
}

/* GREETING */
#greeting {
  font-size:1.3rem;
  margin:10px 0 25px 0;
  font-family:'Roboto', sans-serif;
  color:#444;
  text-align:center;
  background:#fff;
  padding:10px 20px;
  border-radius:12px;
  box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

/* BOOK */
#book {
  position:relative;
  width:95%; max-width:850px;
  height:520px;
  perspective:2000px;
  margin-top:10px;
}

.page {
  width:100%; height:100%;
  background:#fff;
  border:1px solid #ccc;
  box-shadow:0 5px 20px rgba(0,0,0,0.2);
  position:absolute;
  top:0; left:0;
  transform-origin:left center;
  transform-style:preserve-3d;
  transition:transform 0.8s ease;
  border-radius:8px;
  overflow:hidden;
  padding:40px 30px;
  background-image: repeating-linear-gradient(#fff, #fff 28px, #eaeaea 29px);
}

.page h2 {
  font-family:'Dancing Script', cursive;
  font-size:1.6rem;
  margin-bottom:12px;
  color:#333;
  border-bottom:1px dashed #999;
  padding-bottom:5px;
}

.page p {
  font-family:'Roboto', sans-serif;
  font-size:15px;
  line-height:1.6;
  color:#222;
  background:rgba(255,255,255,0.8);
  padding:12px 15px;
  border-left:3px solid #666;
  margin-bottom:10px;
  border-radius:6px;
  max-width:90%;
}

/* FLIP EFFECT */
.page.flipped {
  transform:rotateY(-180deg);
}

/* CONTROLS */
#controls {
  margin-top:20px;
  display:flex; gap:20px;
}
#controls button {
  padding:10px 22px;
  border:none;
  background:#2c2c2c; color:#fff;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
#controls button:hover {
  background:#555;
}

/* FORM */
#updateForm {
  margin-top:30px;
  background:#fff;
  border:1px solid #ddd;
  border-radius:12px;
  padding:20px;
  width:100%; max-width:650px;
  display:flex; flex-direction:column; gap:15px;
  box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

#updateForm textarea {
  border:1px solid #ccc;
  border-radius:8px;
  padding:12px;
  font-size:16px;
  outline:none;
  background:#fafafa;
  font-family:'Roboto', sans-serif;
  min-height:100px;
  resize:none;
}

#updateForm button {
  padding:12px;
  border:none;
  border-radius:8px;
  background:#2c2c2c; color:#fff;
  font-weight:bold;
  cursor:pointer;
}
#updateForm button:hover { background:#555; }

/* RESPONSIVE */
@media(max-width:700px){
  .page { padding:25px; }
  h1 { font-size:2.2rem; }
  #book { height:400px; }
}
</style>
</head>
<body>

<h1>ðŸ“– My Daily Diary</h1>
<div id="greeting"></div>

<div id="book"></div>

<div id="controls">
  <button id="prevBtn">â¬… Prev</button>
  <button id="nextBtn">Next âž¡</button>
</div>

<div id="updateForm">
  <textarea id="textInput" placeholder="Write your diary entry..."></textarea>
  <button id="addBtn">Add Entry</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  let updates = JSON.parse(localStorage.getItem('updates')) || [];
  let currentPage = 0;

  const book = document.getElementById('book');
  const greetingDiv = document.getElementById('greeting');
  const userName = "Shravan"; // <-- changeable name

  // Greeting Message
  function updateGreeting(){
    const hour = new Date().getHours();
    let greeting = "Hello";
    if(hour < 12) greeting = "Good Morning";
    else if(hour < 18) greeting = "Good Afternoon";
    else greeting = "Good Evening";

    greetingDiv.innerHTML = `${greeting}, <strong>${userName}</strong> ðŸŒ¸<br>Welcome back â€” your diary is ready for todayâ€™s story.`;
  }

  // Render Pages
  function renderPages() {
    book.innerHTML = '';
    // Intro Page
    const intro = document.createElement('div');
    intro.className = 'page';
    if(0 < currentPage) intro.classList.add('flipped');
    intro.innerHTML = `<h2>Dear ${userName},</h2>
      <p>This is your personal diary. Each page holds a thought, a feeling, or a moment.<br><br>
      Flip through and let your story grow...</p>`;
    book.appendChild(intro);

    updates.forEach((u,i)=>{
      const page = document.createElement('div');
      page.className = 'page';
      if(i+1 < currentPage) page.classList.add('flipped');
      page.innerHTML = `<h2>${u.date}</h2><p>${u.text}</p>`;
      book.appendChild(page);
    });
  }

  // Add Entry
  document.getElementById('addBtn').addEventListener('click', ()=>{
    const text = document.getElementById('textInput').value.trim();
    if(!text) { alert('Please write something first'); return; }
    const now = new Date();
    const date = now.toLocaleDateString();
    const time = now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
    updates.push({date: `${date} â€” ${time}`, text});
    localStorage.setItem('updates', JSON.stringify(updates));
    document.getElementById('textInput').value='';
    currentPage = updates.length; // go to last page
    renderPages();
  });

  // Navigation
  document.getElementById('nextBtn').addEventListener('click', ()=>{
    if(currentPage < updates.length) {
      currentPage++;
      renderPages();
    }
  });
  document.getElementById('prevBtn').addEventListener('click', ()=>{
    if(currentPage > 0) {
      currentPage--;
      renderPages();
    }
  });

  updateGreeting();
  renderPages();
});
</script>
</body>
</html>
